# ================================
# SonarQube Configuration - Smashly App
# ================================

# Identificación del proyecto
sonar.projectKey=smashly-app
sonar.projectName=Smashly - Padel Rackets App
sonar.projectVersion=1.0.0

# URL de SonarQube + Token (para desarrollo local)
# NOTA: En CI/CD estos valores se sobrescriben con SONAR_HOST_URL y SONAR_TOKEN
sonar.host.url=http://localhost:9000
sonar.login=sqp_3c57624cfb053c6415a60976086350939a3352f6

# ================================
# Multi-módulo: backend + frontend + testing
# ================================
sonar.modules=backend,frontend,testing

# ----------------
# Backend (Node.js + TypeScript + Express)
# ----------------
backend.sonar.projectBaseDir=backend/api
backend.sonar.sources=src
backend.sonar.tests=src/__tests__

# TypeScript/JavaScript settings
backend.sonar.language=ts
backend.sonar.typescript.lcov.reportPaths=coverage/lcov.info
backend.sonar.testExecutionReportPaths=coverage/test-results.xml

# Exclusiones backend
backend.sonar.exclusions=**/node_modules/**,**/dist/**,**/coverage/**,**/*.test.ts,**/*.spec.ts
backend.sonar.test.exclusions=**/node_modules/**,**/dist/**,**/coverage/**
backend.sonar.coverage.exclusions=**/*.test.ts,**/*.spec.ts,**/test/**,**/__tests__/**,src/server.ts
backend.sonar.cpd.exclusions=**/*.test.ts,**/*.spec.ts

# ----------------
# Frontend (React + TypeScript + Vitest)
# ----------------
frontend.sonar.projectBaseDir=frontend
frontend.sonar.sources=src
frontend.sonar.tests=src/__tests__

# TypeScript/JavaScript settings
frontend.sonar.language=ts
frontend.sonar.typescript.lcov.reportPaths=coverage/lcov.info
frontend.sonar.testExecutionReportPaths=coverage/test-results.xml

# Exclusiones frontend
frontend.sonar.exclusions=**/node_modules/**,**/dist/**,**/coverage/**,**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx
frontend.sonar.test.exclusions=**/node_modules/**,**/dist/**,**/coverage/**
frontend.sonar.coverage.exclusions=**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx,**/test/**,**/__tests__/**
frontend.sonar.cpd.exclusions=**/*.test.ts,**/*.test.tsx

# ----------------
# Testing (Java + Selenium + Maven - E2E Tests)
# ----------------
testing.sonar.projectBaseDir=testing
# Solo definir como tests, no como sources (evita indexación doble)
testing.sonar.tests=src/test/java
testing.sonar.java.binaries=target/classes
testing.sonar.java.test.binaries=target/test-classes

# Reportes de test y cobertura (Maven)
testing.sonar.junit.reportPaths=target/surefire-reports
testing.sonar.jacoco.reportPaths=target/jacoco.exec

# Exclusiones testing
testing.sonar.exclusions=**/target/**,**/node_modules/**

# ================================
# Ajustes generales
# ================================
sonar.sourceEncoding=UTF-8

# Esperar calidad antes de aprobar merge
sonar.qualitygate.wait=true

sonar.javascript.lcov.reportPaths=coverage/lcov.info,coverage-backend/lcov.info